!function(){"use strict";angular.module("app",["app.core","app.lab","app.homepage","app.layout"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","ngMaterial","duScroll"])}(),function(){"use strict";function t(t,e,r){t.debugEnabled&&t.debugEnabled(!0),r.configure(o.appErrorPrefix),e.configure({docTitle:o.appTitle+": "})}var e=angular.module("app.core"),o={appErrorPrefix:"[<%= appName %> Error] ",appTitle:"<%= appName %>"};e.value("config",o),e.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";function t(t){var o="/404";t.configureStates(e(),o)}function e(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}t.$inject=["routerHelper"],angular.module("app.core").run(t)}(),function(){"use strict";function t(t,e,o,r){function n(){return a.products}function c(){return i.then(function(t){return a=t.data,!0},function(){return r.error("Impossible de récupérer les données"),!1})}var u="/ressources/products.json",i=t.get(u),a=null,l={ready:c,getProducts:n};return l}angular.module("app.core").factory("dataservice",t),t.$inject=["$http","$q","exception","logger"]}(),function(){"use strict";function t(){return function(t,e){for(var o=0,r=t.length;r>o;o++)if(t[o].value==e||t[o].name==e)return t[o];return null}}angular.module("app.core").filter("getByName",t)}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";function t(){this.config={appErrorPrefix:void 0},this.configure=function(t){this.config.appErrorPrefix=t},this.$get=function(){return{config:this.config}}}function e(t){t.decorator("$exceptionHandler",o)}function o(t,e,o){return function(r,n){var c=e.config.appErrorPrefix||"",u={exception:r,cause:n};r.message=c+r.message,t(r,n),o.error(r.message,u)}}angular.module("blocks.exception").provider("exceptionHandler",t).config(e),e.$inject=["$provide"],o.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function t(t,e){function o(o){return function(r){var n,c;return r.data&&r.data.description&&(n="\n"+r.data.description,c=o+n),r.data.description=c,e.error(c),t.reject(r)}}var r={catcher:o};return r}t.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",t)}(),function(){"use strict";function t(t,e){function o(e,o,r){console.error(e,r),t.error("Error: "+e,o)}function r(e,o,r){console.info(e,r),t.info("Info: "+e,o)}function n(e,o,r){console.log(e,r),t.info("Success: "+e,o)}function c(e,o,r){console.warn(e,r),t.warn("Warning: "+e,o)}var u={error:o,info:r,success:n,warning:c,log:t.log};return u}angular.module("blocks.logger").factory("logger",t),t.$inject=["$log"]}(),function(){"use strict";function t(t,e,o){function r(t,r,c,u){function i(t,r){t.forEach(function(t){t.config.resolve=angular.extend(t.config.resolve||{},n.resolveAlways),e.state(t.state,t.config)}),r&&!g&&(g=!0,o.otherwise(r))}function a(){r.$on("$stateChangeError",function(e,o,r,n,c,i){if(!f){d.errors++,f=!0;var a=o&&(o.title||o.name||o.loadedTemplateUrl)||"unknown target",l="Error routing to "+a+". "+(i.data||"")+". <br/>"+(i.statusText||"")+": "+(i.status||"");u.warning(l,[o]),t.path("/")}})}function l(){a(),p()}function s(){return c.get()}function p(){r.$on("$stateChangeSuccess",function(t,e,o,c,u){d.changes++,f=!1;var i=n.docTitle+" "+(e.title||"");r.title=i})}var f=!1,g=!1,d={errors:0,changes:0},m={configureStates:i,getStates:s,stateCounts:d};return l(),m}var n={docTitle:void 0,resolveAlways:{}};t.html5Mode({enabled:!1,requireBase:!1}),this.configure=function(t){angular.extend(n,t)},this.$get=r,r.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",t),t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("app.lab.attributes",["app.core"])}(),function(){angular.module("app.lab.products",["app.core"])}(),function(){"use strict";angular.module("app.homepage",["app.core"])}(),function(){angular.module("app.lab",["app.core","app.lab.products","app.lab.attributes"])}(),function(){"use strict";angular.module("app.layout",["app.core"])}(),function(){"use strict";function t(){var t=this;t.title="Homepage"}angular.module("app.homepage").controller("HomeController",t)}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"homepage",config:{url:"/",templateUrl:"app/homepage/homepage.view.html",controller:"HomeController",controllerAs:"home",title:"DoYourBeauty"}}]}angular.module("app.homepage").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t){var e=this;e.choices={}}angular.module("app.lab").controller("LabController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"lab",config:{url:"/lab",templateUrl:"app/lab/lab.view.html",controller:"LabController",controllerAs:"labVm",title:"DoYourBeauty - Lab"}}]}angular.module("app.lab").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t){}angular.module("app.layout").controller("HeaderController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e,o,r,n){function c(){return"undefined"==typeof t.labVm.choices.product?void e.go("lab.products"):(g.product=t.labVm.choices.product,g.attributes=o("orderBy")(g.product.attributes,"order"),void(g.current=g.attributes[0]))}function u(t){return"app/lab/attributes/forms/"+t.form+"/"+t.form+".view.html"}function i(t){return"app/lab/attributes/results/"+t.name+"/"+t.name+".view.html"}function a(e){return"undefined"!=typeof t.labVm.choices[e.name]}function l(e){for(var o=g.attributes.length,n=!0;o>0&&n;)document.getElementById(g.attributes[o-1].name)&&document.getElementById(g.attributes[o-1].name).offsetTop-200<=r.pageYOffset&&(g.current=g.attributes[o-1],n=!1,t.$apply()),o--}function s(t){t.name!==g.current.name&&f(document.querySelector("#"+t.name))}function p(t){var e=angular.element(t).next();f(e[0])}function f(t){n.scrollToElement(t,180,1e3)}var g=this;g.product=null,g.attributes=[],g.getForm=u,g.getResultView=i,g.choiceValidate=a,g.render=s,g.goToNext=p,r.addEventListener("scroll",l),c(),t.$on("$destroy",function(){r.removeEventListener("scroll",l)})}angular.module("app.lab.attributes").controller("AttributesController",t),t.$inject=["$scope","$state","$filter","$window","$document"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"lab.attributes",config:{url:"/attributes",title:"DoYourBeauty - attributes",controller:"AttributesController",controllerAs:"attributesVm",templateUrl:"app/lab/attributes/attributes.view.html"}}]}angular.module("app.lab.attributes").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e,o){function r(){o.ready().then(n)}function n(){u.products=o.getProducts()}function c(e){t.labVm.choices.product=e}var u=this;u.select=c,r()}angular.module("app.lab.products").controller("ProductsController",t),t.$inject=["$scope","$state","dataservice"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"lab.products",config:{url:"/products",title:"DoYourBeauty - products",controller:"ProductsController",controllerAs:"productsVm",templateUrl:"app/lab/products/products.view.html"}}]}angular.module("app.lab.products").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t){}angular.module("app.lab.attributes").controller("CreamController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e){function o(e){n.choice=e,t.labVm.choices[n.attribute.name]=e,r(n.choice.img),t.attributesVm.goToNext(document.querySelector("#"+n.attribute.name))}function r(t){n.attribute.haveImgPreview&&(n.imgPreview=t)}var n=this;n.choice=null,n.imgPreview=null,n.setChoice=o,n.setImgPreview=r}angular.module("app.lab.attributes").controller("BtnRadioController",t),t.$inject=["$scope","$filter"]}(),function(){"use strict";function t(t){function e(t){return n.choices.indexOf(t)>-1}function o(t){var e=n.choices.indexOf(t);e>-1?n.choices.splice(e,1):n.choices.push(t)}function r(){t.labVm.choices[n.attribute.name]=n.choices,t.attributesVm.goToNext(document.querySelector("#"+n.attribute.name))}var n=this;n.choices=[],n.exists=e,n.toggle=o,n.saveChoices=r}angular.module("app.lab.attributes").controller("CheckboxController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(t){n.choice&&(document.getElementById("form-color-"+n.choice).style.opacity=1,n.percent=100),n.choice=t}function o(){t.labVm.choices[n.attribute.name]={value:n.choice,percent:n.percent},t.attributesVm.goToNext(document.querySelector("#"+n.attribute.name))}function r(){document.getElementById("form-color-"+n.choice).style.opacity=n.percent/100}var n=this,n=this;n.choice=null,n.setChoice=e,n.setOpacity=r,n.saveChoice=o,n.percent=100}angular.module("app.lab.attributes").controller("ColorController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(e){o.choice=e,t.labVm.choices[o.attribute.name]=e,t.attributesVm.goToNext(document.querySelector("#"+o.attribute.name))}var o=this;o.choice=null,o.setChoice=e}angular.module("app.lab.attributes").controller("ImgRadioController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(t){r.choice&&(r.percent=100),r.choice=t}function o(){t.labVm.choices[r.attribute.name]={value:r.choice,percent:r.percent},t.attributesVm.goToNext(document.querySelector("#"+r.attribute.name))}var r=this,r=this;r.choice=null,r.setChoice=e,r.saveChoice=o,r.percent=100}angular.module("app.lab.attributes").controller("RadioSliderController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(){""!==o.choice&&null!==o.choice?(t.labVm.choices[o.attribute.name]=o.choice,t.attributesVm.goToNext(document.querySelector("#"+o.attribute.name))):delete t.labVm.choices[o.attribute.name]}var o=this;o.choice=null,o.setChoice=e}angular.module("app.lab.attributes").controller("InputTextController",t),t.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb3JlLm1vZHVsZS5qcyIsImNvbmZpZy5qcyIsImNvcmUucm91dGUuanMiLCJhcHAubWluLmpzIiwiZGF0YXNlcnZpY2UuanMiLCJnZXRieW5hbWUuZmlsdGVyLmpzIiwiZXhjZXB0aW9uL2V4Y2VwdGlvbi5tb2R1bGUuanMiLCJsb2dnZXIvbG9nZ2VyLm1vZHVsZS5qcyIsInJvdXRlci9yb3V0ZXIubW9kdWxlLmpzIiwiZXhjZXB0aW9uL2V4Y2VwdGlvbi1oYW5kbGVyLnByb3ZpZGVyLmpzIiwiZXhjZXB0aW9uL2V4Y2VwdGlvbi5qcyIsImxvZ2dlci9sb2dnZXIuanMiLCJyb3V0ZXIvcm91dGVyLWhlbHBlci5wcm92aWRlci5qcyIsImxhYi9hdHRyaWJ1dGVzL2F0dHJpYnV0ZXMubW9kdWxlLmpzIiwibGFiL3Byb2R1Y3RzL3Byb2R1Y3RzLm1vZHVsZS5qcyIsImhvbWVwYWdlL2hvbWVwYWdlLm1vZHVsZS5qcyIsImxhYi9sYWIubW9kdWxlLmpzIiwibGF5b3V0L2xheW91dC5tb2R1bGUuanMiLCJob21lcGFnZS9ob21lcGFnZS5jb250cm9sbGVyLmpzIiwiaG9tZXBhZ2UvaG9tZXBhZ2Uucm91dGUuanMiLCJsYWIvbGFiLmNvbnRyb2xsZXIuanMiLCJsYWIvbGFiLnJvdXRlLmpzIiwibGF5b3V0L2hlYWRlci5jb250cm9sbGVyLmpzIiwibGFiL2F0dHJpYnV0ZXMvYXR0cmlidXRlcy5jb250cm9sbGVyLmpzIiwibGFiL2F0dHJpYnV0ZXMvYXR0cmlidXRlcy5yb3V0ZS5qcyIsImxhYi9wcm9kdWN0cy9wcm9kdWN0cy5jb250cm9sbGVyLmpzIiwibGFiL3Byb2R1Y3RzL3Byb2R1Y3RzLnJvdXRlLmpzIiwibGFiL2F0dHJpYnV0ZXMvcmVzdWx0cy9jcmVhbS9jcmVhbS5jb250cm9sbGVyLmpzIiwibGFiL2F0dHJpYnV0ZXMvZm9ybXMvYnRuLXJhZGlvL2J0bi1yYWRpby5jb250cm9sbGVyLmpzIiwibGFiL2F0dHJpYnV0ZXMvZm9ybXMvY2hlY2tib3gvY2hlY2tib3guY29udHJvbGxlci5qcyIsImxhYi9hdHRyaWJ1dGVzL2Zvcm1zL2NvbG9yL2NvbG9yLmNvbnRyb2xsZXIuanMiLCJsYWIvYXR0cmlidXRlcy9mb3Jtcy9pbWctcmFkaW8vaW1nLXJhZGlvLmNvbnRyb2xsZXIuanMiLCJsYWIvYXR0cmlidXRlcy9mb3Jtcy9yYWRpby1zbGlkZXIvcmFkaW8tc2xpZGVyLmNvbnRyb2xsZXIuanMiLCJsYWIvYXR0cmlidXRlcy9mb3Jtcy9pbnB1dC10ZXh0L2lucHV0LXRleHQuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlndXJlIiwiJGxvZ1Byb3ZpZGVyIiwicm91dGVySGVscGVyUHJvdmlkZXIiLCJleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIiLCJkZWJ1Z0VuYWJsZWQiLCJjb25maWciLCJhcHBFcnJvclByZWZpeCIsImRvY1RpdGxlIiwiYXBwVGl0bGUiLCJjb3JlIiwidmFsdWUiLCIkaW5qZWN0IiwiYXBwUnVuIiwicm91dGVySGVscGVyIiwib3RoZXJ3aXNlIiwiY29uZmlndXJlU3RhdGVzIiwiZ2V0U3RhdGVzIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsInRpdGxlIiwicnVuIiwiZGF0YXNlcnZpY2UiLCIkaHR0cCIsIiRxIiwiZXhjZXB0aW9uIiwibG9nZ2VyIiwiZ2V0UHJvZHVjdHMiLCJkYXRhIiwicHJvZHVjdHMiLCJyZWFkeSIsInByb21pc2UiLCJ0aGVuIiwicmVzdWx0IiwiZXJyb3IiLCJqc29uVVJMIiwiZ2V0Iiwic2VydmljZSIsImZhY3RvcnkiLCJnZXRCeU5hbWUiLCJpbnB1dCIsIm5hbWUiLCJpIiwibGVuZ3RoIiwiZmlsdGVyIiwidGhpcyIsInVuZGVmaW5lZCIsIiRnZXQiLCIkcHJvdmlkZSIsImRlY29yYXRvciIsImV4dGVuZEV4Y2VwdGlvbkhhbmRsZXIiLCIkZGVsZWdhdGUiLCJleGNlcHRpb25IYW5kbGVyIiwiY2F1c2UiLCJlcnJvckRhdGEiLCJtZXNzYWdlIiwicHJvdmlkZXIiLCJjYXRjaGVyIiwiZSIsInRocm93bkRlc2NyaXB0aW9uIiwibmV3TWVzc2FnZSIsImRlc2NyaXB0aW9uIiwicmVqZWN0IiwiJGxvZyIsInRvYXN0ciIsImNvbnNvbGUiLCJpbmZvIiwic3VjY2VzcyIsImxvZyIsIndhcm5pbmciLCJ3YXJuIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIlJvdXRlckhlbHBlciIsIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJzdGF0ZXMiLCJvdGhlcndpc2VQYXRoIiwiZm9yRWFjaCIsInJlc29sdmUiLCJleHRlbmQiLCJyZXNvbHZlQWx3YXlzIiwiaGFzT3RoZXJ3aXNlIiwiaGFuZGxlUm91dGluZ0Vycm9ycyIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImhhbmRsaW5nU3RhdGVDaGFuZ2VFcnJvciIsInN0YXRlQ291bnRzIiwiZXJyb3JzIiwiZGVzdGluYXRpb24iLCJsb2FkZWRUZW1wbGF0ZVVybCIsIm1zZyIsInN0YXR1c1RleHQiLCJzdGF0dXMiLCJwYXRoIiwiaW5pdCIsInVwZGF0ZURvY1RpdGxlIiwiY2hhbmdlcyIsImh0bWw1TW9kZSIsImVuYWJsZWQiLCJyZXF1aXJlQmFzZSIsImNmZyIsIkhvbWVDb250cm9sbGVyIiwidm0iLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiTGFiQ29udHJvbGxlciIsIiRzY29wZSIsImNob2ljZXMiLCJIZWFkZXJDb250cm9sbGVyIiwiQXR0cmlidXRlc0NvbnRyb2xsZXIiLCIkZmlsdGVyIiwiJHdpbmRvdyIsIiRkb2N1bWVudCIsImFjdGl2YXRlIiwibGFiVm0iLCJwcm9kdWN0IiwiZ28iLCJhdHRyaWJ1dGVzIiwiY3VycmVudCIsImdldEZvcm0iLCJhdHRyaWJ1dGUiLCJmb3JtIiwiZ2V0UmVzdWx0VmlldyIsImNob2ljZVZhbGlkYXRlIiwiY2hlY2tQb3MiLCJub3RGb3VuZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvZmZzZXRUb3AiLCJwYWdlWU9mZnNldCIsIiRhcHBseSIsInJlbmRlciIsImdvVG8iLCJxdWVyeVNlbGVjdG9yIiwiZ29Ub05leHQiLCJuZXh0RWxtbnQiLCJlbGVtZW50IiwibmV4dCIsImVsbW50Iiwic2Nyb2xsVG9FbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQcm9kdWN0c0NvbnRyb2xsZXIiLCJzZWxlY3QiLCJDcmVhbUNvbnRyb2xsZXIiLCJCdG5SYWRpb0NvbnRyb2xsZXIiLCJzZXRDaG9pY2UiLCJhdHRyaWJ1dGVDaG9pY2VkIiwiY2hvaWNlIiwic2V0SW1nUHJldmlldyIsImltZyIsImF0dHJpYnV0ZXNWbSIsImhhdmVJbWdQcmV2aWV3IiwiaW1nUHJldmlldyIsIkNoZWNrYm94Q29udHJvbGxlciIsImV4aXN0cyIsImluZGV4T2YiLCJ0b2dnbGUiLCJpZHgiLCJzcGxpY2UiLCJwdXNoIiwic2F2ZUNob2ljZXMiLCJDb2xvckNvbnRyb2xsZXIiLCJzdHlsZSIsIm9wYWNpdHkiLCJwZXJjZW50Iiwic2F2ZUNob2ljZSIsInNldE9wYWNpdHkiLCJJbWdSYWRpb0NvbnRyb2xsZXIiLCJSYWRpb1NsaWRlckNvbnRyb2xsZXIiLCJJbnB1dFRleHRDb250cm9sbGVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQUFDLE9BQUEsT0FDQSxXQUNBLFVBQ0EsZUFDQSxrQkNQQSxXQUNBLFlBRUFELFNBQ0FDLE9BQUEsWUFDQSxZQUFBLGFBQ0EsbUJBQUEsZ0JBQUEsZ0JBQ0EsWUFBQSxhQUFBLGdCQ1BBLFdBQ0EsWUFjQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBRyxjQUNBSCxFQUFBRyxjQUFBLEdBRUFELEVBQUFILFVBQUFLLEVBQUFDLGdCQUNBSixFQUFBRixXQUFBTyxTQUFBRixFQUFBRyxTQUFBLE9BakJBLEdBQUFD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QyxHQUNBN0MsRUFBQThDLFNBQ0E5QyxFQUFBK0QsUUFBQSxLQUVBL0QsRUFBQThDLE9BQUFELEVBR0EsUUFBQW1CLEtBQ0E1RCxFQUFBUSxNQUFBUCxRQUFBTCxFQUFBa0IsVUFBQXRGLE9BQUEvQixNQUFBbUcsRUFBQThDLE9BQUFpQixRQUFBL0QsRUFBQStELFNBQ0EzRCxFQUFBNkMsYUFBQWpCLFNBQUFSLFNBQUFPLGNBQUEsSUFBQS9CLEVBQUFrQixVQUFBdEYsT0FqQkEsR0FBQW9FLEdBQUFoRSxLQUNBZ0UsRUFBQWhFLElBQ0FnRSxHQUFBOEMsT0FBQSxLQUNBOUMsRUFBQTRDLFVBQUFBLEVBQ0E1QyxFQUFBZ0UsV0FBQUEsRUFDQWhFLEVBQUErRCxRQUFBLElBYkE5SyxRQUNBQyxPQUFBLHNCQUNBK0csV0FBQSx3QkFBQWtFLEdBRUFBLEVBQUFySyxTQUFBLGFDUEEsV0FDQSxZQVNBLFNBQUFzSyxHQUFBaEUsR0FLQSxRQUFBd0MsS0FDQSxLQUFBNUMsRUFBQThDLFFBQUEsT0FBQTlDLEVBQUE4QyxRQUNBMUMsRUFBQVEsTUFBQVAsUUFBQUwsRUFBQWtCLFVBQUF0RixNQUFBb0UsRUFBQThDLE9BQ0ExQyxFQUFBNkMsYUFBQWpCLFNBQUFSLFNBQUFPLGNBQUEsSUFBQS9CLEVBQUFrQixVQUFBdEYsY0FFQXdFLEdBQUFRLE1BQUFQLFFBQUFMLEVBQUFrQixVQUFBdEYsTUFUQSxHQUFBb0UsR0FBQWhFLElBQ0FnRSxHQUFBOEMsT0FBQSxLQUNBOUMsRUFBQTRDLFVBQUFBLEVBVkEzSixRQUNBQyxPQUFBLHNCQUNBK0csV0FBQSxzQkFBQW1FLEdBRUFBLEVBQUF0SyxTQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXHJcbiAgICAgICAgJ2FwcC5jb3JlJyxcclxuICAgICAgICAnYXBwLmxhYicsXHJcbiAgICAgICAgJ2FwcC5ob21lcGFnZScsXHJcbiAgICAgICAgJ2FwcC5sYXlvdXQnXHJcbiAgICBdKTtcclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJywgW1xyXG4gICAgICAgICAgICAnbmdBbmltYXRlJywgJ25nU2FuaXRpemUnLFxyXG4gICAgICAgICAgICAnYmxvY2tzLmV4Y2VwdGlvbicsICdibG9ja3MubG9nZ2VyJywgJ2Jsb2Nrcy5yb3V0ZXInLFxyXG4gICAgICAgICAgICAndWkucm91dGVyJywgJ25nTWF0ZXJpYWwnLCAnZHVTY3JvbGwnXHJcbiAgICAgICAgXSk7XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIGNvcmUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvcmUnKTtcclxuICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgYXBwRXJyb3JQcmVmaXg6ICdbPCU9IGFwcE5hbWUgJT4gRXJyb3JdICcsXHJcbiAgICAgICAgYXBwVGl0bGU6ICc8JT0gYXBwTmFtZSAlPidcclxuICAgIH07XHJcblxyXG4gICAgY29yZS52YWx1ZSgnY29uZmlnJywgY29uZmlnKTtcclxuXHJcbiAgICBjb3JlLmNvbmZpZyhjb25maWd1cmUpO1xyXG5cclxuICAgIGNvbmZpZ3VyZS4kaW5qZWN0ID0gWyckbG9nUHJvdmlkZXInLCAncm91dGVySGVscGVyUHJvdmlkZXInLCAnZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGNvbmZpZ3VyZSgkbG9nUHJvdmlkZXIsIHJvdXRlckhlbHBlclByb3ZpZGVyLCBleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIpIHtcclxuICAgICAgICBpZiAoJGxvZ1Byb3ZpZGVyLmRlYnVnRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAkbG9nUHJvdmlkZXIuZGVidWdFbmFibGVkKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIuY29uZmlndXJlKGNvbmZpZy5hcHBFcnJvclByZWZpeCk7XHJcbiAgICAgICAgcm91dGVySGVscGVyUHJvdmlkZXIuY29uZmlndXJlKHtkb2NUaXRsZTogY29uZmlnLmFwcFRpdGxlICsgJzogJ30pO1xyXG4gICAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuY29yZScpXHJcbiAgICAgICAgLnJ1bihhcHBSdW4pO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gYXBwUnVuKHJvdXRlckhlbHBlcikge1xyXG4gICAgICAgIHZhciBvdGhlcndpc2UgPSAnLzQwNCc7XHJcbiAgICAgICAgcm91dGVySGVscGVyLmNvbmZpZ3VyZVN0YXRlcyhnZXRTdGF0ZXMoKSwgb3RoZXJ3aXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGU6ICc0MDQnLFxyXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnLzQwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29yZS80MDQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc0MDQnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXHJcbiAgICAgICAgJ2FwcC5jb3JlJyxcclxuICAgICAgICAnYXBwLmxhYicsXHJcbiAgICAgICAgJ2FwcC5ob21lcGFnZScsXHJcbiAgICAgICAgJ2FwcC5sYXlvdXQnXHJcbiAgICBdKTtcclxuXHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvcmUnLCBbXHJcbiAgICAgICAgICAgICduZ0FuaW1hdGUnLCAnbmdTYW5pdGl6ZScsXHJcbiAgICAgICAgICAgICdibG9ja3MuZXhjZXB0aW9uJywgJ2Jsb2Nrcy5sb2dnZXInLCAnYmxvY2tzLnJvdXRlcicsXHJcbiAgICAgICAgICAgICd1aS5yb3V0ZXInLCAnbmdNYXRlcmlhbCcsICdkdVNjcm9sbCdcclxuICAgICAgICBdKTtcclxufSkoKTtcclxuXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBjb3JlID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJyk7XHJcbiAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgIGFwcEVycm9yUHJlZml4OiAnWzwlPSBhcHBOYW1lICU+IEVycm9yXSAnLFxyXG4gICAgICAgIGFwcFRpdGxlOiAnPCU9IGFwcE5hbWUgJT4nXHJcbiAgICB9O1xyXG5cclxuICAgIGNvcmUudmFsdWUoJ2NvbmZpZycsIGNvbmZpZyk7XHJcblxyXG4gICAgY29yZS5jb25maWcoY29uZmlndXJlKTtcclxuXHJcbiAgICBjb25maWd1cmUuJGluamVjdCA9IFsnJGxvZ1Byb3ZpZGVyJywgJ3JvdXRlckhlbHBlclByb3ZpZGVyJywgJ2V4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciddO1xyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBjb25maWd1cmUoJGxvZ1Byb3ZpZGVyLCByb3V0ZXJIZWxwZXJQcm92aWRlciwgZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgaWYgKCRsb2dQcm92aWRlci5kZWJ1Z0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgJGxvZ1Byb3ZpZGVyLmRlYnVnRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLmNvbmZpZ3VyZShjb25maWcuYXBwRXJyb3JQcmVmaXgpO1xyXG4gICAgICAgIHJvdXRlckhlbHBlclByb3ZpZGVyLmNvbmZpZ3VyZSh7ZG9jVGl0bGU6IGNvbmZpZy5hcHBUaXRsZSArICc6ICd9KTtcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gW1wicm91dGVySGVscGVyXCJdO1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgICAgICAucnVuKGFwcFJ1bik7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKSB7XHJcbiAgICAgICAgdmFyIG90aGVyd2lzZSA9ICcvNDA0JztcclxuICAgICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGVzKGdldFN0YXRlcygpLCBvdGhlcndpc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogJzQwNCcsXHJcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvNDA0JyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb3JlLzQwNC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzQwNCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmNvcmUnKVxyXG4gICAgICAgIC5mYWN0b3J5KCdkYXRhc2VydmljZScsIGRhdGFzZXJ2aWNlKTtcclxuXHJcbiAgICBkYXRhc2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckcScsICdleGNlcHRpb24nLCAnbG9nZ2VyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGRhdGFzZXJ2aWNlKCRodHRwLCAkcSwgZXhjZXB0aW9uLCBsb2dnZXIpIHtcclxuICAgICAgICB2YXIganNvblVSTCA9ICcvcmVzc291cmNlcy9wcm9kdWN0cy5qc29uJztcclxuICAgICAgICB2YXIgcHJvbWlzZSA9ICRodHRwLmdldChqc29uVVJMKTtcclxuICAgICAgICB2YXIgZGF0YSA9IG51bGw7XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICByZWFkeTogcmVhZHksXHJcbiAgICAgICAgICBnZXRQcm9kdWN0czogZ2V0UHJvZHVjdHNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvZHVjdHMoKSB7XHJcbiAgICAgICAgICByZXR1cm4gZGF0YS5wcm9kdWN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWR5KCkge1xyXG4gICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgICAgZGF0YSA9IHJlc3VsdC5kYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ltcG9zc2libGUgZGUgcsOpY3Vww6lyZXIgbGVzIGRvbm7DqWVzJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbiAoKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29yZScpXHJcbiAgICAuZmlsdGVyKCdnZXRCeU5hbWUnLCBnZXRCeU5hbWUpO1xyXG5cclxuICBmdW5jdGlvbiBnZXRCeU5hbWUoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIG5hbWUpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGlucHV0W2ldLnZhbHVlID09IG5hbWUgfHwgaW5wdXRbaV0ubmFtZSA9PSBuYW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gaW5wdXRbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jsb2Nrcy5leGNlcHRpb24nLCBbJ2Jsb2Nrcy5sb2dnZXInXSk7XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdibG9ja3MubG9nZ2VyJywgW10pO1xyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmxvY2tzLnJvdXRlcicsIFtcclxuICAgICAgICAndWkucm91dGVyJyxcclxuICAgICAgICAnYmxvY2tzLmxvZ2dlcidcclxuICAgIF0pO1xyXG59KSgpO1xyXG5cbi8vIEluY2x1ZGUgaW4gaW5kZXguaHRtbCBzbyB0aGF0IGFwcCBsZXZlbCBleGNlcHRpb25zIGFyZSBoYW5kbGVkLlxyXG4vLyBFeGNsdWRlIGZyb20gdGVzdFJ1bm5lci5odG1sIHdoaWNoIHNob3VsZCBydW4gZXhhY3RseSB3aGF0IGl0IHdhbnRzIHRvIHJ1blxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2Jsb2Nrcy5leGNlcHRpb24nKVxyXG4gICAgICAgIC5wcm92aWRlcignZXhjZXB0aW9uSGFuZGxlcicsIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcilcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdXN0IGNvbmZpZ3VyZSB0aGUgZXhjZXB0aW9uIGhhbmRsaW5nXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgICAgICAgYXBwRXJyb3JQcmVmaXg6IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29uZmlndXJlID0gZnVuY3Rpb24gKGFwcEVycm9yUHJlZml4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmFwcEVycm9yUHJlZml4ID0gYXBwRXJyb3JQcmVmaXg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7Y29uZmlnOiB0aGlzLmNvbmZpZ307XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25maWcuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZ3VyZSBieSBzZXR0aW5nIGFuIG9wdGlvbmFsIHN0cmluZyB2YWx1ZSBmb3IgYXBwRXJyb3JQcmVmaXguXHJcbiAgICAgKiBBY2Nlc3NpYmxlIHZpYSBjb25maWcuYXBwRXJyb3JQcmVmaXggKHZpYSBjb25maWcgdmFsdWUpLlxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAkcHJvdmlkZVxyXG4gICAgICovXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcHJvdmlkZSkge1xyXG4gICAgICAgICRwcm92aWRlLmRlY29yYXRvcignJGV4Y2VwdGlvbkhhbmRsZXInLCBleHRlbmRFeGNlcHRpb25IYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBleHRlbmRFeGNlcHRpb25IYW5kbGVyLiRpbmplY3QgPSBbJyRkZWxlZ2F0ZScsICdleGNlcHRpb25IYW5kbGVyJywgJ2xvZ2dlciddO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0ZW5kIHRoZSAkZXhjZXB0aW9uSGFuZGxlciBzZXJ2aWNlIHRvIGFsc28gZGlzcGxheSBhIHRvYXN0LlxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAkZGVsZWdhdGVcclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gZXhjZXB0aW9uSGFuZGxlclxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBsb2dnZXJcclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgZGVjb3JhdGVkICRleGNlcHRpb25IYW5kbGVyIHNlcnZpY2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZXh0ZW5kRXhjZXB0aW9uSGFuZGxlcigkZGVsZWdhdGUsIGV4Y2VwdGlvbkhhbmRsZXIsIGxvZ2dlcikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBFcnJvclByZWZpeCA9IGV4Y2VwdGlvbkhhbmRsZXIuY29uZmlnLmFwcEVycm9yUHJlZml4IHx8ICcnO1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JEYXRhID0ge2V4Y2VwdGlvbjogZXhjZXB0aW9uLCBjYXVzZTogY2F1c2V9O1xyXG4gICAgICAgICAgICBleGNlcHRpb24ubWVzc2FnZSA9IGFwcEVycm9yUHJlZml4ICsgZXhjZXB0aW9uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRkZWxlZ2F0ZShleGNlcHRpb24sIGNhdXNlKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvdWxkIGFkZCB0aGUgZXJyb3IgdG8gYSBzZXJ2aWNlJ3MgY29sbGVjdGlvbixcclxuICAgICAgICAgICAgICogYWRkIGVycm9ycyB0byAkcm9vdFNjb3BlLCBsb2cgZXJyb3JzIHRvIHJlbW90ZSB3ZWIgc2VydmVyLFxyXG4gICAgICAgICAgICAgKiBvciBsb2cgbG9jYWxseS4gT3IgdGhyb3cgaGFyZC4gSXQgaXMgZW50aXJlbHkgdXAgdG8geW91LlxyXG4gICAgICAgICAgICAgKiB0aHJvdyBleGNlcHRpb247XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqICAgICB0aHJvdyB7IG1lc3NhZ2U6ICdlcnJvciBtZXNzYWdlIHdlIGFkZGVkJyB9O1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGV4Y2VwdGlvbi5tZXNzYWdlLCBlcnJvckRhdGEpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4Y2VwdGlvbi4kaW5qZWN0ID0gW1wiJHFcIiwgXCJsb2dnZXJcIl07XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYmxvY2tzLmV4Y2VwdGlvbicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2V4Y2VwdGlvbicsIGV4Y2VwdGlvbik7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBleGNlcHRpb24oJHEsIGxvZ2dlcikge1xyXG4gICAgICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgICAgICBjYXRjaGVyOiBjYXRjaGVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2F0Y2hlcihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhyb3duRGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3duRGVzY3JpcHRpb24gPSAnXFxuJyArIGUuZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBuZXdNZXNzYWdlID0gbWVzc2FnZSArIHRocm93bkRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS5kYXRhLmRlc2NyaXB0aW9uID0gbmV3TWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihuZXdNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYmxvY2tzLmxvZ2dlcicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2xvZ2dlcicsIGxvZ2dlcik7XHJcblxyXG4gICAgbG9nZ2VyLiRpbmplY3QgPSBbJyRsb2cnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGxvZ2dlcigkbG9nLCB0b2FzdHIpIHtcclxuICAgICAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgZXJyb3IgICA6IGVycm9yLFxyXG4gICAgICAgICAgICBpbmZvICAgIDogaW5mbyxcclxuICAgICAgICAgICAgc3VjY2VzcyA6IHN1Y2Nlc3MsXHJcbiAgICAgICAgICAgIHdhcm5pbmcgOiB3YXJuaW5nLFxyXG5cclxuICAgICAgICAgICAgLy8gc3RyYWlnaHQgdG8gY29uc29sZTsgYnlwYXNzIHRvYXN0clxyXG4gICAgICAgICAgICBsb2cgICAgIDogJGxvZy5sb2dcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgZGF0YSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCB0aXRsZSk7XHJcbiAgICAgICAgICAgICRsb2cuZXJyb3IoJ0Vycm9yOiAnICsgbWVzc2FnZSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbmZvKG1lc3NhZ2UsIGRhdGEsIHRpdGxlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhtZXNzYWdlLCB0aXRsZSk7XHJcbiAgICAgICAgICAgICRsb2cuaW5mbygnSW5mbzogJyArIG1lc3NhZ2UsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhtZXNzYWdlLCBkYXRhLCB0aXRsZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCB0aXRsZSk7XHJcbiAgICAgICAgICAgICRsb2cuaW5mbygnU3VjY2VzczogJyArIG1lc3NhZ2UsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlLCBkYXRhLCB0aXRsZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSwgdGl0bGUpO1xyXG4gICAgICAgICAgICAkbG9nLndhcm4oJ1dhcm5pbmc6ICcgKyBtZXNzYWdlLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oKSk7XHJcblxuLyogSGVscCBjb25maWd1cmUgdGhlIHN0YXRlLWJhc2UgdWkucm91dGVyICovXHJcbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYmxvY2tzLnJvdXRlcicpXHJcbiAgICAgICAgLnByb3ZpZGVyKCdyb3V0ZXJIZWxwZXInLCByb3V0ZXJIZWxwZXJQcm92aWRlcik7XHJcblxyXG4gICAgcm91dGVySGVscGVyUHJvdmlkZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIHJvdXRlckhlbHBlclByb3ZpZGVyKCRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgZG9jVGl0bGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcmVzb2x2ZUFsd2F5czoge31cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xyXG4gICAgICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgICByZXF1aXJlQmFzZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb25maWd1cmUgPSBmdW5jdGlvbihjZmcpIHtcclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoY29uZmlnLCBjZmcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuJGdldCA9IFJvdXRlckhlbHBlcjtcclxuICAgICAgICBSb3V0ZXJIZWxwZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJ2xvZ2dlciddO1xyXG4gICAgICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIFJvdXRlckhlbHBlcigkbG9jYXRpb24sICRyb290U2NvcGUsICRzdGF0ZSwgbG9nZ2VyKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGluZ1N0YXRlQ2hhbmdlRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGhhc090aGVyd2lzZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGVDb3VudHMgPSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnM6IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiAwXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyZVN0YXRlczogY29uZmlndXJlU3RhdGVzLFxyXG4gICAgICAgICAgICAgICAgZ2V0U3RhdGVzOiBnZXRTdGF0ZXMsXHJcbiAgICAgICAgICAgICAgICBzdGF0ZUNvdW50czogc3RhdGVDb3VudHNcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGluaXQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG5cclxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjb25maWd1cmVTdGF0ZXMoc3RhdGVzLCBvdGhlcndpc2VQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZXMuZm9yRWFjaChmdW5jdGlvbihzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmNvbmZpZy5yZXNvbHZlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoc3RhdGUuY29uZmlnLnJlc29sdmUgfHwge30sIGNvbmZpZy5yZXNvbHZlQWx3YXlzKTtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZShzdGF0ZS5zdGF0ZSwgc3RhdGUuY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG90aGVyd2lzZVBhdGggJiYgIWhhc090aGVyd2lzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc090aGVyd2lzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShvdGhlcndpc2VQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlUm91dGluZ0Vycm9ycygpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlIGNhbmNlbGxhdGlvbjpcclxuICAgICAgICAgICAgICAgIC8vIE9uIHJvdXRpbmcgZXJyb3IsIGdvIHRvIHRoZSBkYXNoYm9hcmQuXHJcbiAgICAgICAgICAgICAgICAvLyBQcm92aWRlIGFuIGV4aXQgY2xhdXNlIGlmIGl0IHRyaWVzIHRvIGRvIGl0IHR3aWNlLlxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsaW5nU3RhdGVDaGFuZ2VFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRzLmVycm9ycysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGluZ1N0YXRlQ2hhbmdlRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVzdGluYXRpb24gPSAodG9TdGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvU3RhdGUudGl0bGUgfHwgdG9TdGF0ZS5uYW1lIHx8IHRvU3RhdGUubG9hZGVkVGVtcGxhdGVVcmwpKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Vua25vd24gdGFyZ2V0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9ICdFcnJvciByb3V0aW5nIHRvICcgKyBkZXN0aW5hdGlvbiArICcuICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycm9yLmRhdGEgfHwgJycpICsgJy4gPGJyLz4nICsgKGVycm9yLnN0YXR1c1RleHQgfHwgJycpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6ICcgKyAoZXJyb3Iuc3RhdHVzIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm5pbmcobXNnLCBbdG9TdGF0ZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVSb3V0aW5nRXJyb3JzKCk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEb2NUaXRsZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7IHJldHVybiAkc3RhdGUuZ2V0KCk7IH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURvY1RpdGxlKCkge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRzLmNoYW5nZXMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxpbmdTdGF0ZUNoYW5nZUVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGNvbmZpZy5kb2NUaXRsZSArICcgJyArICh0b1N0YXRlLnRpdGxlIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS50aXRsZSA9IHRpdGxlOyAvLyBkYXRhIGJpbmQgdG8gPHRpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycsIFsnYXBwLmNvcmUnXSk7XHJcblxyXG59KSAoKTtcclxuXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmxhYi5wcm9kdWN0cycsIFsnYXBwLmNvcmUnXSk7XHJcblxyXG59KSgpO1xyXG5cbihmdW5jdGlvbiAoKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5ob21lcGFnZScsIFtcclxuICAgICdhcHAuY29yZSdcclxuICBdKTtcclxuXHJcbn0pICgpO1xyXG5cbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAubGFiJywgW1xyXG4gICAgJ2FwcC5jb3JlJyxcclxuICAgICdhcHAubGFiLnByb2R1Y3RzJyxcclxuICAgICdhcHAubGFiLmF0dHJpYnV0ZXMnXHJcbiAgXSk7XHJcblxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmxheW91dCcsIFtcclxuICAgICAgJ2FwcC5jb3JlJ1xyXG4gICAgXSk7XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uICgpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAuaG9tZXBhZ2UnKS5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIEhvbWVDb250cm9sbGVyKTtcclxuXHJcbiAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoKcKge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLnRpdGxlID0gJ0hvbWVwYWdlJztcclxuICB9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuaG9tZXBhZ2UnKVxyXG4gICAgICAgIC5ydW4oYXBwUnVuKTtcclxuXHJcbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGFwcFJ1bihyb3V0ZXJIZWxwZXIpIHtcclxuICAgICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGVzKGdldFN0YXRlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGU6ICdob21lcGFnZScsXHJcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9ob21lcGFnZS9ob21lcGFnZS52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnaG9tZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEb1lvdXJCZWF1dHknXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0xhYkNvbnRyb2xsZXInLCBMYWJDb250cm9sbGVyKTtcclxuXHJcbiAgICBMYWJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gTGFiQ29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNob2ljZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiJylcclxuICAgICAgICAucnVuKGFwcFJ1bik7XHJcblxyXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKSB7XHJcbiAgICAgICAgcm91dGVySGVscGVyLmNvbmZpZ3VyZVN0YXRlcyhnZXRTdGF0ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlOiAnbGFiJyxcclxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9sYWInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2xhYi9sYWIudmlldy5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTGFiQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnbGFiVm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRG9Zb3VyQmVhdXR5IC0gTGFiJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYXlvdXQnKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBIZWFkZXJDb250cm9sbGVyKTtcclxuXHJcbiAgICBIZWFkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiLmF0dHJpYnV0ZXMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBdHRyaWJ1dGVzQ29udHJvbGxlcicsIEF0dHJpYnV0ZXNDb250cm9sbGVyKTtcclxuXHJcbiAgICBBdHRyaWJ1dGVzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJHN0YXRlJywgJyRmaWx0ZXInLCAnJHdpbmRvdycsICckZG9jdW1lbnQnXTtcclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gQXR0cmlidXRlc0NvbnRyb2xsZXIoJHNjb3BlLCAkc3RhdGUsICRmaWx0ZXIsICR3aW5kb3csICRkb2N1bWVudCkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0ucHJvZHVjdCA9IG51bGw7XHJcbiAgICAgICAgdm0uYXR0cmlidXRlcyA9IFtdO1xyXG4gICAgICAgIHZtLmdldEZvcm0gPSBnZXRGb3JtO1xyXG4gICAgICAgIHZtLmdldFJlc3VsdFZpZXcgPSBnZXRSZXN1bHRWaWV3O1xyXG4gICAgICAgIHZtLmNob2ljZVZhbGlkYXRlID0gY2hvaWNlVmFsaWRhdGU7XHJcbiAgICAgICAgdm0ucmVuZGVyID0gcmVuZGVyO1xyXG4gICAgICAgIHZtLmdvVG9OZXh0ID0gZ29Ub05leHQ7XHJcblxyXG4gICAgICAgICR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBjaGVja1Bvcyk7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUubGFiVm0uY2hvaWNlcy5wcm9kdWN0ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnbGFiLnByb2R1Y3RzJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZtLnByb2R1Y3QgPSAkc2NvcGUubGFiVm0uY2hvaWNlcy5wcm9kdWN0O1xyXG4gICAgICAgICAgdm0uYXR0cmlidXRlcyA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5wcm9kdWN0LmF0dHJpYnV0ZXMsICdvcmRlcicpO1xyXG4gICAgICAgICAgdm0uY3VycmVudCA9IHZtLmF0dHJpYnV0ZXNbMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRGb3JtKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIFwiYXBwL2xhYi9hdHRyaWJ1dGVzL2Zvcm1zL1wiICsgYXR0cmlidXRlLmZvcm0gKyBcIi9cIiArICBhdHRyaWJ1dGUuZm9ybSArIFwiLnZpZXcuaHRtbFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVzdWx0Vmlldyhwcm9kdWN0KSB7XHJcbiAgICAgICAgICByZXR1cm4gXCJhcHAvbGFiL2F0dHJpYnV0ZXMvcmVzdWx0cy9cIiArIHByb2R1Y3QubmFtZSArIFwiL1wiICsgcHJvZHVjdC5uYW1lICsgXCIudmlldy5odG1sXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjaG9pY2VWYWxpZGF0ZShhdHRyaWJ1dGUpIHtcclxuICAgICAgICAgIHJldHVybiB0eXBlb2YgJHNjb3BlLmxhYlZtLmNob2ljZXNbYXR0cmlidXRlLm5hbWVdICE9PSBcInVuZGVmaW5lZFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tQb3MoZSkge1xyXG4gICAgICAgICAgdmFyIGkgPSB2bS5hdHRyaWJ1dGVzLmxlbmd0aDtcclxuICAgICAgICAgIHZhciBub3RGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICB3aGlsZSAoaSA+IDAgJiYgbm90Rm91bmQpIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHZtLmF0dHJpYnV0ZXNbaS0xXS5uYW1lKSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2bS5hdHRyaWJ1dGVzW2ktMV0ubmFtZSkub2Zmc2V0VG9wIC0gMjAwIDw9ICR3aW5kb3cucGFnZVlPZmZzZXQpIHtcclxuICAgICAgICAgICAgICB2bS5jdXJyZW50ID0gdm0uYXR0cmlidXRlc1tpLTFdO1xyXG4gICAgICAgICAgICAgIG5vdEZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlcihhdHRyaWJ1dGUpIHtcclxuICAgICAgICAgIGlmIChhdHRyaWJ1dGUubmFtZSAhPT0gdm0uY3VycmVudC5uYW1lKSB7XHJcbiAgICAgICAgICAgIGdvVG8oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBhdHRyaWJ1dGUubmFtZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ29Ub05leHQoY3VycmVudCkge1xyXG4gICAgICAgICAgdmFyIG5leHRFbG1udCA9IGFuZ3VsYXIuZWxlbWVudChjdXJyZW50KS5uZXh0KCk7XHJcbiAgICAgICAgICBnb1RvKG5leHRFbG1udFswXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnb1RvKGVsbW50KSB7XHJcbiAgICAgICAgICAkZG9jdW1lbnQuc2Nyb2xsVG9FbGVtZW50KGVsbW50LCAxODAsIDEwMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGNoZWNrUG9zKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiLmF0dHJpYnV0ZXMnKVxyXG4gICAgICAgIC5ydW4oYXBwUnVuKTtcclxuXHJcbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGFwcFJ1bihyb3V0ZXJIZWxwZXIpIHtcclxuICAgICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGVzKGdldFN0YXRlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGU6ICdsYWIuYXR0cmlidXRlcycsXHJcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXR0cmlidXRlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEb1lvdXJCZWF1dHkgLSBhdHRyaWJ1dGVzJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQXR0cmlidXRlc0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2F0dHJpYnV0ZXNWbScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbGFiL2F0dHJpYnV0ZXMvYXR0cmlidXRlcy52aWV3Lmh0bWwnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5wcm9kdWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Byb2R1Y3RzQ29udHJvbGxlcicsIFByb2R1Y3RzQ29udHJvbGxlcik7XHJcblxyXG4gICAgUHJvZHVjdHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckc3RhdGUnLCAnZGF0YXNlcnZpY2UnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIFByb2R1Y3RzQ29udHJvbGxlcigkc2NvcGUsICRzdGF0ZSwgZGF0YXNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5zZWxlY3QgPSBzZWxlY3Q7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgZGF0YXNlcnZpY2UucmVhZHkoKS50aGVuKGdldFByb2R1Y3RzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkge1xyXG4gICAgICAgICAgdm0ucHJvZHVjdHMgPSBkYXRhc2VydmljZS5nZXRQcm9kdWN0cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0KHByb2R1Y3QpIHtcclxuICAgICAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzLnByb2R1Y3QgPSBwcm9kdWN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiLnByb2R1Y3RzJylcclxuICAgICAgICAucnVuKGFwcFJ1bik7XHJcblxyXG4gICAgYXBwUnVuLiRpbmplY3QgPSBbJ3JvdXRlckhlbHBlciddO1xyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBhcHBSdW4ocm91dGVySGVscGVyKSB7XHJcbiAgICAgICAgcm91dGVySGVscGVyLmNvbmZpZ3VyZVN0YXRlcyhnZXRTdGF0ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlOiAnbGFiLnByb2R1Y3RzJyxcclxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9wcm9kdWN0cycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEb1lvdXJCZWF1dHkgLSBwcm9kdWN0cycsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2R1Y3RzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAncHJvZHVjdHNWbScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbGFiL3Byb2R1Y3RzL3Byb2R1Y3RzLnZpZXcuaHRtbCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiLmF0dHJpYnV0ZXMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdDcmVhbUNvbnRyb2xsZXInLCBDcmVhbUNvbnRyb2xsZXIpO1xyXG5cclxuICAgIENyZWFtQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIENyZWFtQ29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0J0blJhZGlvQ29udHJvbGxlcicsIEJ0blJhZGlvQ29udHJvbGxlcik7XHJcblxyXG4gICAgQnRuUmFkaW9Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckZmlsdGVyJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBCdG5SYWRpb0NvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5jaG9pY2UgPSBudWxsO1xyXG4gICAgICAgIHZtLmltZ1ByZXZpZXcgPSBudWxsO1xyXG4gICAgICAgIHZtLnNldENob2ljZSA9IHNldENob2ljZTtcclxuICAgICAgICB2bS5zZXRJbWdQcmV2aWV3ID0gc2V0SW1nUHJldmlldztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Q2hvaWNlKGF0dHJpYnV0ZUNob2ljZWQpIHtcclxuICAgICAgICAgIHZtLmNob2ljZSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICAgICAkc2NvcGUubGFiVm0uY2hvaWNlc1t2bS5hdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGVDaG9pY2VkO1xyXG4gICAgICAgICAgc2V0SW1nUHJldmlldyh2bS5jaG9pY2UuaW1nKTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuYXR0cmlidXRlc1ZtLmdvVG9OZXh0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdm0uYXR0cmlidXRlLm5hbWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEltZ1ByZXZpZXcoaW1nKSB7XHJcbiAgICAgICAgICBpZiAodm0uYXR0cmlidXRlLmhhdmVJbWdQcmV2aWV3KSB7XHJcbiAgICAgICAgICAgIHZtLmltZ1ByZXZpZXcgPSBpbWc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NoZWNrYm94Q29udHJvbGxlcicsIENoZWNrYm94Q29udHJvbGxlcik7XHJcblxyXG4gICAgQ2hlY2tib3hDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gQ2hlY2tib3hDb250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY2hvaWNlcyA9IFtdO1xyXG4gICAgICAgIHZtLmV4aXN0cyA9IGV4aXN0cztcclxuICAgICAgICB2bS50b2dnbGUgPSB0b2dnbGU7XHJcbiAgICAgICAgdm0uc2F2ZUNob2ljZXMgPSBzYXZlQ2hvaWNlcztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhpc3RzKHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdm0uY2hvaWNlcy5pbmRleE9mKHZhbHVlKSA+IC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlKHZhbHVlKSB7XHJcbiAgICAgICAgICB2YXIgaWR4ID0gdm0uY2hvaWNlcy5pbmRleE9mKHZhbHVlKTtcclxuICAgICAgICAgIGlmIChpZHggPiAtMSkge1xyXG4gICAgICAgICAgICB2bS5jaG9pY2VzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdm0uY2hvaWNlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlQ2hvaWNlcygpIHtcclxuICAgICAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzW3ZtLmF0dHJpYnV0ZS5uYW1lXSA9IHZtLmNob2ljZXM7XHJcbiAgICAgICAgICAkc2NvcGUuYXR0cmlidXRlc1ZtLmdvVG9OZXh0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdm0uYXR0cmlidXRlLm5hbWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NvbG9yQ29udHJvbGxlcicsIENvbG9yQ29udHJvbGxlcik7XHJcblxyXG4gICAgQ29sb3JDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gQ29sb3JDb250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5jaG9pY2UgPSBudWxsO1xyXG4gICAgICAgIHZtLnNldENob2ljZSA9IHNldENob2ljZTtcclxuICAgICAgICB2bS5zZXRPcGFjaXR5ID0gc2V0T3BhY2l0eTtcclxuICAgICAgICB2bS5zYXZlQ2hvaWNlID0gc2F2ZUNob2ljZTtcclxuICAgICAgICB2bS5wZXJjZW50ID0gMTAwO1xyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Q2hvaWNlKGF0dHJpYnV0ZUNob2ljZWQpIHtcclxuICAgICAgICAgIGlmICh2bS5jaG9pY2UpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29sb3ItJyArIHZtLmNob2ljZSkuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgICAgIHZtLnBlcmNlbnQgPSAxMDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2bS5jaG9pY2UgPSBhdHRyaWJ1dGVDaG9pY2VkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZUNob2ljZSgpIHtcclxuICAgICAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzW3ZtLmF0dHJpYnV0ZS5uYW1lXSA9IHt2YWx1ZTogdm0uY2hvaWNlLCBwZXJjZW50OiB2bS5wZXJjZW50fTtcclxuICAgICAgICAgICRzY29wZS5hdHRyaWJ1dGVzVm0uZ29Ub05leHQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB2bS5hdHRyaWJ1dGUubmFtZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0T3BhY2l0eSgpIHtcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWNvbG9yLScgKyB2bS5jaG9pY2UpLnN0eWxlLm9wYWNpdHkgPSB2bS5wZXJjZW50IC8gMTAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgICAgLm1vZHVsZSgnYXBwLmxhYi5hdHRyaWJ1dGVzJylcclxuICAgICAgLmNvbnRyb2xsZXIoJ0ltZ1JhZGlvQ29udHJvbGxlcicsIEltZ1JhZGlvQ29udHJvbGxlcik7XHJcblxyXG4gIEltZ1JhZGlvQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgLyogQG5nSW5qZWN0ICovXHJcbiAgZnVuY3Rpb24gSW1nUmFkaW9Db250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLmNob2ljZSA9IG51bGw7XHJcbiAgICB2bS5zZXRDaG9pY2UgPSBzZXRDaG9pY2U7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNldENob2ljZShhdHRyaWJ1dGVDaG9pY2VkKSB7XHJcbiAgICAgIHZtLmNob2ljZSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzW3ZtLmF0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICRzY29wZS5hdHRyaWJ1dGVzVm0uZ29Ub05leHQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB2bS5hdHRyaWJ1dGUubmFtZSkpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5hdHRyaWJ1dGVzJylcclxuICAgICAgICAuY29udHJvbGxlcignUmFkaW9TbGlkZXJDb250cm9sbGVyJywgUmFkaW9TbGlkZXJDb250cm9sbGVyKTtcclxuXHJcbiAgICBSYWRpb1NsaWRlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBSYWRpb1NsaWRlckNvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNob2ljZSA9IG51bGw7XHJcbiAgICAgICAgdm0uc2V0Q2hvaWNlID0gc2V0Q2hvaWNlO1xyXG4gICAgICAgIHZtLnNhdmVDaG9pY2UgPSBzYXZlQ2hvaWNlO1xyXG4gICAgICAgIHZtLnBlcmNlbnQgPSAxMDA7XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRDaG9pY2UoYXR0cmlidXRlQ2hvaWNlZCkge1xyXG4gICAgICAgICAgaWYgKHZtLmNob2ljZSkge1xyXG4gICAgICAgICAgICB2bS5wZXJjZW50ID0gMTAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdm0uY2hvaWNlID0gYXR0cmlidXRlQ2hvaWNlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVDaG9pY2UoKSB7XHJcbiAgICAgICAgICAkc2NvcGUubGFiVm0uY2hvaWNlc1t2bS5hdHRyaWJ1dGUubmFtZV0gPSB7dmFsdWU6IHZtLmNob2ljZSwgcGVyY2VudDogdm0ucGVyY2VudH07XHJcbiAgICAgICAgICAkc2NvcGUuYXR0cmlidXRlc1ZtLmdvVG9OZXh0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdm0uYXR0cmlidXRlLm5hbWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG5cbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5hdHRyaWJ1dGVzJylcclxuICAgICAgICAuY29udHJvbGxlcignSW5wdXRUZXh0Q29udHJvbGxlcicsIElucHV0VGV4dENvbnRyb2xsZXIpO1xyXG5cclxuICAgIElucHV0VGV4dENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBJbnB1dFRleHRDb250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uY2hvaWNlID0gbnVsbDtcclxuICAgICAgICB2bS5zZXRDaG9pY2UgPSBzZXRDaG9pY2U7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldENob2ljZSgpIHtcclxuICAgICAgICAgIGlmICh2bS5jaG9pY2UgIT09IFwiXCIgJiYgdm0uY2hvaWNlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzW3ZtLmF0dHJpYnV0ZS5uYW1lXSA9IHZtLmNob2ljZTtcclxuICAgICAgICAgICAgJHNjb3BlLmF0dHJpYnV0ZXNWbS5nb1RvTmV4dChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHZtLmF0dHJpYnV0ZS5uYW1lKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGUgJHNjb3BlLmxhYlZtLmNob2ljZXNbdm0uYXR0cmlidXRlLm5hbWVdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgICAgICAuZmFjdG9yeSgnZGF0YXNlcnZpY2UnLCBkYXRhc2VydmljZSk7XHJcblxyXG4gICAgZGF0YXNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJHEnLCAnZXhjZXB0aW9uJywgJ2xvZ2dlciddO1xyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBkYXRhc2VydmljZSgkaHR0cCwgJHEsIGV4Y2VwdGlvbiwgbG9nZ2VyKSB7XHJcbiAgICAgICAgdmFyIGpzb25VUkwgPSAnL3Jlc3NvdXJjZXMvcHJvZHVjdHMuanNvbic7XHJcbiAgICAgICAgdmFyIHByb21pc2UgPSAkaHR0cC5nZXQoanNvblVSTCk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBudWxsO1xyXG4gICAgICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgICAgcmVhZHk6IHJlYWR5LFxyXG4gICAgICAgICAgZ2V0UHJvZHVjdHM6IGdldFByb2R1Y3RzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkeSgpIHtcclxuICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSByZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbXBvc3NpYmxlIGRlIHLDqWN1cMOpcmVyIGxlcyBkb25uw6llcycpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgIC5maWx0ZXIoJ2dldEJ5TmFtZScsIGdldEJ5TmFtZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGdldEJ5TmFtZSgpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCwgbmFtZSkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gaW5wdXQubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaW5wdXRbaV0udmFsdWUgPT0gbmFtZSB8fCBpbnB1dFtpXS5uYW1lID09IG5hbWUpIHtcclxuICAgICAgICAgIHJldHVybiBpbnB1dFtpXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2Jsb2Nrcy5leGNlcHRpb24nLCBbJ2Jsb2Nrcy5sb2dnZXInXSk7XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYmxvY2tzLmxvZ2dlcicsIFtdKTtcclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdibG9ja3Mucm91dGVyJywgW1xyXG4gICAgICAgICd1aS5yb3V0ZXInLFxyXG4gICAgICAgICdibG9ja3MubG9nZ2VyJ1xyXG4gICAgXSk7XHJcbn0pKCk7XHJcbiIsIi8vIEluY2x1ZGUgaW4gaW5kZXguaHRtbCBzbyB0aGF0IGFwcCBsZXZlbCBleGNlcHRpb25zIGFyZSBoYW5kbGVkLlxyXG4vLyBFeGNsdWRlIGZyb20gdGVzdFJ1bm5lci5odG1sIHdoaWNoIHNob3VsZCBydW4gZXhhY3RseSB3aGF0IGl0IHdhbnRzIHRvIHJ1blxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2Jsb2Nrcy5leGNlcHRpb24nKVxyXG4gICAgICAgIC5wcm92aWRlcignZXhjZXB0aW9uSGFuZGxlcicsIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcilcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdXN0IGNvbmZpZ3VyZSB0aGUgZXhjZXB0aW9uIGhhbmRsaW5nXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgICAgICAgYXBwRXJyb3JQcmVmaXg6IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29uZmlndXJlID0gZnVuY3Rpb24gKGFwcEVycm9yUHJlZml4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmFwcEVycm9yUHJlZml4ID0gYXBwRXJyb3JQcmVmaXg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7Y29uZmlnOiB0aGlzLmNvbmZpZ307XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25maWcuJGluamVjdCA9IFsnJHByb3ZpZGUnXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZ3VyZSBieSBzZXR0aW5nIGFuIG9wdGlvbmFsIHN0cmluZyB2YWx1ZSBmb3IgYXBwRXJyb3JQcmVmaXguXHJcbiAgICAgKiBBY2Nlc3NpYmxlIHZpYSBjb25maWcuYXBwRXJyb3JQcmVmaXggKHZpYSBjb25maWcgdmFsdWUpLlxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAkcHJvdmlkZVxyXG4gICAgICovXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcHJvdmlkZSkge1xyXG4gICAgICAgICRwcm92aWRlLmRlY29yYXRvcignJGV4Y2VwdGlvbkhhbmRsZXInLCBleHRlbmRFeGNlcHRpb25IYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBleHRlbmRFeGNlcHRpb25IYW5kbGVyLiRpbmplY3QgPSBbJyRkZWxlZ2F0ZScsICdleGNlcHRpb25IYW5kbGVyJywgJ2xvZ2dlciddO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0ZW5kIHRoZSAkZXhjZXB0aW9uSGFuZGxlciBzZXJ2aWNlIHRvIGFsc28gZGlzcGxheSBhIHRvYXN0LlxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAkZGVsZWdhdGVcclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gZXhjZXB0aW9uSGFuZGxlclxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBsb2dnZXJcclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgZGVjb3JhdGVkICRleGNlcHRpb25IYW5kbGVyIHNlcnZpY2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZXh0ZW5kRXhjZXB0aW9uSGFuZGxlcigkZGVsZWdhdGUsIGV4Y2VwdGlvbkhhbmRsZXIsIGxvZ2dlcikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBFcnJvclByZWZpeCA9IGV4Y2VwdGlvbkhhbmRsZXIuY29uZmlnLmFwcEVycm9yUHJlZml4IHx8ICcnO1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JEYXRhID0ge2V4Y2VwdGlvbjogZXhjZXB0aW9uLCBjYXVzZTogY2F1c2V9O1xyXG4gICAgICAgICAgICBleGNlcHRpb24ubWVzc2FnZSA9IGFwcEVycm9yUHJlZml4ICsgZXhjZXB0aW9uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRkZWxlZ2F0ZShleGNlcHRpb24sIGNhdXNlKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvdWxkIGFkZCB0aGUgZXJyb3IgdG8gYSBzZXJ2aWNlJ3MgY29sbGVjdGlvbixcclxuICAgICAgICAgICAgICogYWRkIGVycm9ycyB0byAkcm9vdFNjb3BlLCBsb2cgZXJyb3JzIHRvIHJlbW90ZSB3ZWIgc2VydmVyLFxyXG4gICAgICAgICAgICAgKiBvciBsb2cgbG9jYWxseS4gT3IgdGhyb3cgaGFyZC4gSXQgaXMgZW50aXJlbHkgdXAgdG8geW91LlxyXG4gICAgICAgICAgICAgKiB0aHJvdyBleGNlcHRpb247XHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICAgICAqICAgICB0aHJvdyB7IG1lc3NhZ2U6ICdlcnJvciBtZXNzYWdlIHdlIGFkZGVkJyB9O1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGV4Y2VwdGlvbi5tZXNzYWdlLCBlcnJvckRhdGEpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYmxvY2tzLmV4Y2VwdGlvbicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2V4Y2VwdGlvbicsIGV4Y2VwdGlvbik7XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBleGNlcHRpb24oJHEsIGxvZ2dlcikge1xyXG4gICAgICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgICAgICBjYXRjaGVyOiBjYXRjaGVyXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2F0Y2hlcihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhyb3duRGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3duRGVzY3JpcHRpb24gPSAnXFxuJyArIGUuZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBuZXdNZXNzYWdlID0gbWVzc2FnZSArIHRocm93bkRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS5kYXRhLmRlc2NyaXB0aW9uID0gbmV3TWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihuZXdNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2Jsb2Nrcy5sb2dnZXInKVxyXG4gICAgICAgIC5mYWN0b3J5KCdsb2dnZXInLCBsb2dnZXIpO1xyXG5cclxuICAgIGxvZ2dlci4kaW5qZWN0ID0gWyckbG9nJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBsb2dnZXIoJGxvZywgdG9hc3RyKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIGVycm9yICAgOiBlcnJvcixcclxuICAgICAgICAgICAgaW5mbyAgICA6IGluZm8sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MgOiBzdWNjZXNzLFxyXG4gICAgICAgICAgICB3YXJuaW5nIDogd2FybmluZyxcclxuXHJcbiAgICAgICAgICAgIC8vIHN0cmFpZ2h0IHRvIGNvbnNvbGU7IGJ5cGFzcyB0b2FzdHJcclxuICAgICAgICAgICAgbG9nICAgICA6ICRsb2cubG9nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UsIGRhdGEsIHRpdGxlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSwgdGl0bGUpO1xyXG4gICAgICAgICAgICAkbG9nLmVycm9yKCdFcnJvcjogJyArIG1lc3NhZ2UsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5mbyhtZXNzYWdlLCBkYXRhLCB0aXRsZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8obWVzc2FnZSwgdGl0bGUpO1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oJ0luZm86ICcgKyBtZXNzYWdlLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSwgZGF0YSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgdGl0bGUpO1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oJ1N1Y2Nlc3M6ICcgKyBtZXNzYWdlLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSwgZGF0YSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UsIHRpdGxlKTtcclxuICAgICAgICAgICAgJGxvZy53YXJuKCdXYXJuaW5nOiAnICsgbWVzc2FnZSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KCkpO1xyXG4iLCIvKiBIZWxwIGNvbmZpZ3VyZSB0aGUgc3RhdGUtYmFzZSB1aS5yb3V0ZXIgKi9cclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdibG9ja3Mucm91dGVyJylcclxuICAgICAgICAucHJvdmlkZXIoJ3JvdXRlckhlbHBlcicsIHJvdXRlckhlbHBlclByb3ZpZGVyKTtcclxuXHJcbiAgICByb3V0ZXJIZWxwZXJQcm92aWRlci4kaW5qZWN0ID0gWyckbG9jYXRpb25Qcm92aWRlcicsICckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInXTtcclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gcm91dGVySGVscGVyUHJvdmlkZXIoJGxvY2F0aW9uUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxuICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICBkb2NUaXRsZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICByZXNvbHZlQWx3YXlzOiB7fVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XHJcbiAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgIHJlcXVpcmVCYXNlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uKGNmZykge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjb25maWcsIGNmZyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy4kZ2V0ID0gUm91dGVySGVscGVyO1xyXG4gICAgICAgIFJvdXRlckhlbHBlci4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsICckc3RhdGUnLCAnbG9nZ2VyJ107XHJcbiAgICAgICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICAgICAgZnVuY3Rpb24gUm91dGVySGVscGVyKCRsb2NhdGlvbiwgJHJvb3RTY29wZSwgJHN0YXRlLCBsb2dnZXIpIHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsaW5nU3RhdGVDaGFuZ2VFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgaGFzT3RoZXJ3aXNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZUNvdW50cyA9IHtcclxuICAgICAgICAgICAgICAgIGVycm9yczogMCxcclxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IDBcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgICAgICAgICAgY29uZmlndXJlU3RhdGVzOiBjb25maWd1cmVTdGF0ZXMsXHJcbiAgICAgICAgICAgICAgICBnZXRTdGF0ZXM6IGdldFN0YXRlcyxcclxuICAgICAgICAgICAgICAgIHN0YXRlQ291bnRzOiBzdGF0ZUNvdW50c1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbmZpZ3VyZVN0YXRlcyhzdGF0ZXMsIG90aGVyd2lzZVBhdGgpIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY29uZmlnLnJlc29sdmUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzdGF0ZS5jb25maWcucmVzb2x2ZSB8fCB7fSwgY29uZmlnLnJlc29sdmVBbHdheXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKHN0YXRlLnN0YXRlLCBzdGF0ZS5jb25maWcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3RoZXJ3aXNlUGF0aCAmJiAhaGFzT3RoZXJ3aXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzT3RoZXJ3aXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKG90aGVyd2lzZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVSb3V0aW5nRXJyb3JzKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUm91dGUgY2FuY2VsbGF0aW9uOlxyXG4gICAgICAgICAgICAgICAgLy8gT24gcm91dGluZyBlcnJvciwgZ28gdG8gdGhlIGRhc2hib2FyZC5cclxuICAgICAgICAgICAgICAgIC8vIFByb3ZpZGUgYW4gZXhpdCBjbGF1c2UgaWYgaXQgdHJpZXMgdG8gZG8gaXQgdHdpY2UuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxpbmdTdGF0ZUNoYW5nZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudHMuZXJyb3JzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsaW5nU3RhdGVDaGFuZ2VFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9ICh0b1N0YXRlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG9TdGF0ZS50aXRsZSB8fCB0b1N0YXRlLm5hbWUgfHwgdG9TdGF0ZS5sb2FkZWRUZW1wbGF0ZVVybCkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndW5rbm93biB0YXJnZXQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gJ0Vycm9yIHJvdXRpbmcgdG8gJyArIGRlc3RpbmF0aW9uICsgJy4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXJyb3IuZGF0YSB8fCAnJykgKyAnLiA8YnIvPicgKyAoZXJyb3Iuc3RhdHVzVGV4dCB8fCAnJykgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzogJyArIChlcnJvci5zdGF0dXMgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhtc2csIFt0b1N0YXRlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZVJvdXRpbmdFcnJvcnMoKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURvY1RpdGxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHsgcmV0dXJuICRzdGF0ZS5nZXQoKTsgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlRG9jVGl0bGUoKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudHMuY2hhbmdlcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGluZ1N0YXRlQ2hhbmdlRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gY29uZmlnLmRvY1RpdGxlICsgJyAnICsgKHRvU3RhdGUudGl0bGUgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnRpdGxlID0gdGl0bGU7IC8vIGRhdGEgYmluZCB0byA8dGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycsIFsnYXBwLmNvcmUnXSk7XHJcblxyXG59KSAoKTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYWIucHJvZHVjdHMnLCBbJ2FwcC5jb3JlJ10pO1xyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG5cclxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmhvbWVwYWdlJywgW1xyXG4gICAgJ2FwcC5jb3JlJ1xyXG4gIF0pO1xyXG5cclxufSkgKCk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAubGFiJywgW1xyXG4gICAgJ2FwcC5jb3JlJyxcclxuICAgICdhcHAubGFiLnByb2R1Y3RzJyxcclxuICAgICdhcHAubGFiLmF0dHJpYnV0ZXMnXHJcbiAgXSk7XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYXlvdXQnLCBbXHJcbiAgICAgICdhcHAuY29yZSdcclxuICAgIF0pO1xyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5ob21lcGFnZScpLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpO1xyXG5cclxuICBmdW5jdGlvbiBIb21lQ29udHJvbGxlcigpwqB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgdm0udGl0bGUgPSAnSG9tZXBhZ2UnO1xyXG4gIH1cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuaG9tZXBhZ2UnKVxyXG4gICAgICAgIC5ydW4oYXBwUnVuKTtcclxuXHJcbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGFwcFJ1bihyb3V0ZXJIZWxwZXIpIHtcclxuICAgICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGVzKGdldFN0YXRlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGU6ICdob21lcGFnZScsXHJcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9ob21lcGFnZS9ob21lcGFnZS52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnaG9tZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEb1lvdXJCZWF1dHknXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWInKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdMYWJDb250cm9sbGVyJywgTGFiQ29udHJvbGxlcik7XHJcblxyXG4gICAgTGFiQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIExhYkNvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5jaG9pY2VzID0ge307XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWInKVxyXG4gICAgICAgIC5ydW4oYXBwUnVuKTtcclxuXHJcbiAgICBhcHBSdW4uJGluamVjdCA9IFsncm91dGVySGVscGVyJ107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIGFwcFJ1bihyb3V0ZXJIZWxwZXIpIHtcclxuICAgICAgICByb3V0ZXJIZWxwZXIuY29uZmlndXJlU3RhdGVzKGdldFN0YXRlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGU6ICdsYWInLFxyXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2xhYicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbGFiL2xhYi52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMYWJDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdsYWJWbScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEb1lvdXJCZWF1dHkgLSBMYWInXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5sYXlvdXQnKVxyXG4gICAgICAgICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBIZWFkZXJDb250cm9sbGVyKTtcclxuXHJcbiAgICBIZWFkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5hdHRyaWJ1dGVzJylcclxuICAgICAgICAuY29udHJvbGxlcignQXR0cmlidXRlc0NvbnRyb2xsZXInLCBBdHRyaWJ1dGVzQ29udHJvbGxlcik7XHJcblxyXG4gICAgQXR0cmlidXRlc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRzdGF0ZScsICckZmlsdGVyJywgJyR3aW5kb3cnLCAnJGRvY3VtZW50J107XHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIEF0dHJpYnV0ZXNDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCAkZmlsdGVyLCAkd2luZG93LCAkZG9jdW1lbnQpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLnByb2R1Y3QgPSBudWxsO1xyXG4gICAgICAgIHZtLmF0dHJpYnV0ZXMgPSBbXTtcclxuICAgICAgICB2bS5nZXRGb3JtID0gZ2V0Rm9ybTtcclxuICAgICAgICB2bS5nZXRSZXN1bHRWaWV3ID0gZ2V0UmVzdWx0VmlldztcclxuICAgICAgICB2bS5jaG9pY2VWYWxpZGF0ZSA9IGNob2ljZVZhbGlkYXRlO1xyXG4gICAgICAgIHZtLnJlbmRlciA9IHJlbmRlcjtcclxuICAgICAgICB2bS5nb1RvTmV4dCA9IGdvVG9OZXh0O1xyXG5cclxuICAgICAgICAkd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgY2hlY2tQb3MpO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmxhYlZtLmNob2ljZXMucHJvZHVjdCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2xhYi5wcm9kdWN0cycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2bS5wcm9kdWN0ID0gJHNjb3BlLmxhYlZtLmNob2ljZXMucHJvZHVjdDtcclxuICAgICAgICAgIHZtLmF0dHJpYnV0ZXMgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0ucHJvZHVjdC5hdHRyaWJ1dGVzLCAnb3JkZXInKTtcclxuICAgICAgICAgIHZtLmN1cnJlbnQgPSB2bS5hdHRyaWJ1dGVzWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Rm9ybShhdHRyaWJ1dGUpIHtcclxuICAgICAgICAgIHJldHVybiBcImFwcC9sYWIvYXR0cmlidXRlcy9mb3Jtcy9cIiArIGF0dHJpYnV0ZS5mb3JtICsgXCIvXCIgKyAgYXR0cmlidXRlLmZvcm0gKyBcIi52aWV3Lmh0bWxcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFJlc3VsdFZpZXcocHJvZHVjdCkge1xyXG4gICAgICAgICAgcmV0dXJuIFwiYXBwL2xhYi9hdHRyaWJ1dGVzL3Jlc3VsdHMvXCIgKyBwcm9kdWN0Lm5hbWUgKyBcIi9cIiArIHByb2R1Y3QubmFtZSArIFwiLnZpZXcuaHRtbFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hvaWNlVmFsaWRhdGUoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHlwZW9mICRzY29wZS5sYWJWbS5jaG9pY2VzW2F0dHJpYnV0ZS5uYW1lXSAhPT0gXCJ1bmRlZmluZWRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrUG9zKGUpIHtcclxuICAgICAgICAgIHZhciBpID0gdm0uYXR0cmlidXRlcy5sZW5ndGg7XHJcbiAgICAgICAgICB2YXIgbm90Rm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgd2hpbGUgKGkgPiAwICYmIG5vdEZvdW5kKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2bS5hdHRyaWJ1dGVzW2ktMV0ubmFtZSkgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodm0uYXR0cmlidXRlc1tpLTFdLm5hbWUpLm9mZnNldFRvcCAtIDIwMCA8PSAkd2luZG93LnBhZ2VZT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgdm0uY3VycmVudCA9IHZtLmF0dHJpYnV0ZXNbaS0xXTtcclxuICAgICAgICAgICAgICBub3RGb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW5kZXIoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICBpZiAoYXR0cmlidXRlLm5hbWUgIT09IHZtLmN1cnJlbnQubmFtZSkge1xyXG4gICAgICAgICAgICBnb1RvKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgYXR0cmlidXRlLm5hbWUpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdvVG9OZXh0KGN1cnJlbnQpIHtcclxuICAgICAgICAgIHZhciBuZXh0RWxtbnQgPSBhbmd1bGFyLmVsZW1lbnQoY3VycmVudCkubmV4dCgpO1xyXG4gICAgICAgICAgZ29UbyhuZXh0RWxtbnRbMF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ29UbyhlbG1udCkge1xyXG4gICAgICAgICAgJGRvY3VtZW50LnNjcm9sbFRvRWxlbWVudChlbG1udCwgMTgwLCAxMDAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oXCIkZGVzdHJveVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBjaGVja1Bvcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLnJ1bihhcHBSdW4pO1xyXG5cclxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gYXBwUnVuKHJvdXRlckhlbHBlcikge1xyXG4gICAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZXMoZ2V0U3RhdGVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2xhYi5hdHRyaWJ1dGVzJyxcclxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hdHRyaWJ1dGVzJyxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RvWW91ckJlYXV0eSAtIGF0dHJpYnV0ZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdHRyaWJ1dGVzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnYXR0cmlidXRlc1ZtJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9sYWIvYXR0cmlidXRlcy9hdHRyaWJ1dGVzLnZpZXcuaHRtbCdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5wcm9kdWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Byb2R1Y3RzQ29udHJvbGxlcicsIFByb2R1Y3RzQ29udHJvbGxlcik7XHJcblxyXG4gICAgUHJvZHVjdHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckc3RhdGUnLCAnZGF0YXNlcnZpY2UnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIFByb2R1Y3RzQ29udHJvbGxlcigkc2NvcGUsICRzdGF0ZSwgZGF0YXNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5zZWxlY3QgPSBzZWxlY3Q7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgZGF0YXNlcnZpY2UucmVhZHkoKS50aGVuKGdldFByb2R1Y3RzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkge1xyXG4gICAgICAgICAgdm0ucHJvZHVjdHMgPSBkYXRhc2VydmljZS5nZXRQcm9kdWN0cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0KHByb2R1Y3QpIHtcclxuICAgICAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzLnByb2R1Y3QgPSBwcm9kdWN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5wcm9kdWN0cycpXHJcbiAgICAgICAgLnJ1bihhcHBSdW4pO1xyXG5cclxuICAgIGFwcFJ1bi4kaW5qZWN0ID0gWydyb3V0ZXJIZWxwZXInXTtcclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gYXBwUnVuKHJvdXRlckhlbHBlcikge1xyXG4gICAgICAgIHJvdXRlckhlbHBlci5jb25maWd1cmVTdGF0ZXMoZ2V0U3RhdGVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2xhYi5wcm9kdWN0cycsXHJcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvcHJvZHVjdHMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRG9Zb3VyQmVhdXR5IC0gcHJvZHVjdHMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9kdWN0c0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3Byb2R1Y3RzVm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2xhYi9wcm9kdWN0cy9wcm9kdWN0cy52aWV3Lmh0bWwnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0NyZWFtQ29udHJvbGxlcicsIENyZWFtQ29udHJvbGxlcik7XHJcblxyXG4gICAgQ3JlYW1Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gQ3JlYW1Db250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0J0blJhZGlvQ29udHJvbGxlcicsIEJ0blJhZGlvQ29udHJvbGxlcik7XHJcblxyXG4gICAgQnRuUmFkaW9Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckZmlsdGVyJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBCdG5SYWRpb0NvbnRyb2xsZXIoJHNjb3BlLCAkZmlsdGVyKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5jaG9pY2UgPSBudWxsO1xyXG4gICAgICAgIHZtLmltZ1ByZXZpZXcgPSBudWxsO1xyXG4gICAgICAgIHZtLnNldENob2ljZSA9IHNldENob2ljZTtcclxuICAgICAgICB2bS5zZXRJbWdQcmV2aWV3ID0gc2V0SW1nUHJldmlldztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Q2hvaWNlKGF0dHJpYnV0ZUNob2ljZWQpIHtcclxuICAgICAgICAgIHZtLmNob2ljZSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICAgICAkc2NvcGUubGFiVm0uY2hvaWNlc1t2bS5hdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGVDaG9pY2VkO1xyXG4gICAgICAgICAgc2V0SW1nUHJldmlldyh2bS5jaG9pY2UuaW1nKTtcclxuXHJcbiAgICAgICAgICAkc2NvcGUuYXR0cmlidXRlc1ZtLmdvVG9OZXh0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdm0uYXR0cmlidXRlLm5hbWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEltZ1ByZXZpZXcoaW1nKSB7XHJcbiAgICAgICAgICBpZiAodm0uYXR0cmlidXRlLmhhdmVJbWdQcmV2aWV3KSB7XHJcbiAgICAgICAgICAgIHZtLmltZ1ByZXZpZXcgPSBpbWc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiLmF0dHJpYnV0ZXMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdDaGVja2JveENvbnRyb2xsZXInLCBDaGVja2JveENvbnRyb2xsZXIpO1xyXG5cclxuICAgIENoZWNrYm94Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIENoZWNrYm94Q29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNob2ljZXMgPSBbXTtcclxuICAgICAgICB2bS5leGlzdHMgPSBleGlzdHM7XHJcbiAgICAgICAgdm0udG9nZ2xlID0gdG9nZ2xlO1xyXG4gICAgICAgIHZtLnNhdmVDaG9pY2VzID0gc2F2ZUNob2ljZXM7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4aXN0cyh2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHZtLmNob2ljZXMuaW5kZXhPZih2YWx1ZSkgPiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZSh2YWx1ZSkge1xyXG4gICAgICAgICAgdmFyIGlkeCA9IHZtLmNob2ljZXMuaW5kZXhPZih2YWx1ZSk7XHJcbiAgICAgICAgICBpZiAoaWR4ID4gLTEpIHtcclxuICAgICAgICAgICAgdm0uY2hvaWNlcy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZtLmNob2ljZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZUNob2ljZXMoKSB7XHJcbiAgICAgICAgICAkc2NvcGUubGFiVm0uY2hvaWNlc1t2bS5hdHRyaWJ1dGUubmFtZV0gPSB2bS5jaG9pY2VzO1xyXG4gICAgICAgICAgJHNjb3BlLmF0dHJpYnV0ZXNWbS5nb1RvTmV4dChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHZtLmF0dHJpYnV0ZS5uYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmxhYi5hdHRyaWJ1dGVzJylcclxuICAgICAgICAuY29udHJvbGxlcignQ29sb3JDb250cm9sbGVyJywgQ29sb3JDb250cm9sbGVyKTtcclxuXHJcbiAgICBDb2xvckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcblxyXG4gICAgLyogQG5nSW5qZWN0ICovXHJcbiAgICBmdW5jdGlvbiBDb2xvckNvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmNob2ljZSA9IG51bGw7XHJcbiAgICAgICAgdm0uc2V0Q2hvaWNlID0gc2V0Q2hvaWNlO1xyXG4gICAgICAgIHZtLnNldE9wYWNpdHkgPSBzZXRPcGFjaXR5O1xyXG4gICAgICAgIHZtLnNhdmVDaG9pY2UgPSBzYXZlQ2hvaWNlO1xyXG4gICAgICAgIHZtLnBlcmNlbnQgPSAxMDA7XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRDaG9pY2UoYXR0cmlidXRlQ2hvaWNlZCkge1xyXG4gICAgICAgICAgaWYgKHZtLmNob2ljZSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1jb2xvci0nICsgdm0uY2hvaWNlKS5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgICAgICAgICAgdm0ucGVyY2VudCA9IDEwMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZtLmNob2ljZSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlQ2hvaWNlKCkge1xyXG4gICAgICAgICAgJHNjb3BlLmxhYlZtLmNob2ljZXNbdm0uYXR0cmlidXRlLm5hbWVdID0ge3ZhbHVlOiB2bS5jaG9pY2UsIHBlcmNlbnQ6IHZtLnBlcmNlbnR9O1xyXG4gICAgICAgICAgJHNjb3BlLmF0dHJpYnV0ZXNWbS5nb1RvTmV4dChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHZtLmF0dHJpYnV0ZS5uYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRPcGFjaXR5KCkge1xyXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29sb3ItJyArIHZtLmNob2ljZSkuc3R5bGUub3BhY2l0eSA9IHZtLnBlcmNlbnQgLyAxMDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgICAgLm1vZHVsZSgnYXBwLmxhYi5hdHRyaWJ1dGVzJylcclxuICAgICAgLmNvbnRyb2xsZXIoJ0ltZ1JhZGlvQ29udHJvbGxlcicsIEltZ1JhZGlvQ29udHJvbGxlcik7XHJcblxyXG4gIEltZ1JhZGlvQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgLyogQG5nSW5qZWN0ICovXHJcbiAgZnVuY3Rpb24gSW1nUmFkaW9Db250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLmNob2ljZSA9IG51bGw7XHJcbiAgICB2bS5zZXRDaG9pY2UgPSBzZXRDaG9pY2U7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNldENob2ljZShhdHRyaWJ1dGVDaG9pY2VkKSB7XHJcbiAgICAgIHZtLmNob2ljZSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICRzY29wZS5sYWJWbS5jaG9pY2VzW3ZtLmF0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICRzY29wZS5hdHRyaWJ1dGVzVm0uZ29Ub05leHQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB2bS5hdHRyaWJ1dGUubmFtZSkpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5sYWIuYXR0cmlidXRlcycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1JhZGlvU2xpZGVyQ29udHJvbGxlcicsIFJhZGlvU2xpZGVyQ29udHJvbGxlcik7XHJcblxyXG4gICAgUmFkaW9TbGlkZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gUmFkaW9TbGlkZXJDb250cm9sbGVyKCRzY29wZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5jaG9pY2UgPSBudWxsO1xyXG4gICAgICAgIHZtLnNldENob2ljZSA9IHNldENob2ljZTtcclxuICAgICAgICB2bS5zYXZlQ2hvaWNlID0gc2F2ZUNob2ljZTtcclxuICAgICAgICB2bS5wZXJjZW50ID0gMTAwO1xyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Q2hvaWNlKGF0dHJpYnV0ZUNob2ljZWQpIHtcclxuICAgICAgICAgIGlmICh2bS5jaG9pY2UpIHtcclxuICAgICAgICAgICAgdm0ucGVyY2VudCA9IDEwMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZtLmNob2ljZSA9IGF0dHJpYnV0ZUNob2ljZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlQ2hvaWNlKCkge1xyXG4gICAgICAgICAgJHNjb3BlLmxhYlZtLmNob2ljZXNbdm0uYXR0cmlidXRlLm5hbWVdID0ge3ZhbHVlOiB2bS5jaG9pY2UsIHBlcmNlbnQ6IHZtLnBlcmNlbnR9O1xyXG4gICAgICAgICAgJHNjb3BlLmF0dHJpYnV0ZXNWbS5nb1RvTmV4dChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHZtLmF0dHJpYnV0ZS5uYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAubGFiLmF0dHJpYnV0ZXMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdJbnB1dFRleHRDb250cm9sbGVyJywgSW5wdXRUZXh0Q29udHJvbGxlcik7XHJcblxyXG4gICAgSW5wdXRUZXh0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIElucHV0VGV4dENvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5jaG9pY2UgPSBudWxsO1xyXG4gICAgICAgIHZtLnNldENob2ljZSA9IHNldENob2ljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Q2hvaWNlKCkge1xyXG4gICAgICAgICAgaWYgKHZtLmNob2ljZSAhPT0gXCJcIiAmJiB2bS5jaG9pY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxhYlZtLmNob2ljZXNbdm0uYXR0cmlidXRlLm5hbWVdID0gdm0uY2hvaWNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuYXR0cmlidXRlc1ZtLmdvVG9OZXh0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdm0uYXR0cmlidXRlLm5hbWUpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSAkc2NvcGUubGFiVm0uY2hvaWNlc1t2bS5hdHRyaWJ1dGUubmFtZV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
