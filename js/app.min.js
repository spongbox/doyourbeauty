!function(){"use strict";angular.module("app",["app.core","app.lab","app.homepage","app.layout","app.basket"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","ngMaterial","duScroll"])}(),function(){"use strict";function t(t,e,r){t.debugEnabled&&t.debugEnabled(!0),r.configure(o.appErrorPrefix),e.configure({docTitle:o.appTitle+": "})}var e=angular.module("app.core"),o={appErrorPrefix:"[<%= appName %> Error] ",appTitle:"<%= appName %>"};e.value("config",o),e.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";function t(t){var o="/404";t.configureStates(e(),o)}function e(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}t.$inject=["routerHelper"],angular.module("app.core").run(t)}(),function(){"use strict";function t(t,e,o,r){function n(){return i.products}function c(){return u.then(function(t){return i=t.data,!0},function(){return r.error("Impossible de récupérer les données"),!1})}var a="/ressources/products.json",u=t.get(a),i=null,l={ready:c,getProducts:n};return l}angular.module("app.core").factory("dataservice",t),t.$inject=["$http","$q","exception","logger"]}(),function(){"use strict";function t(){return function(t,e){for(var o=0,r=t.length;r>o;o++)if(t[o].value==e||t[o].name==e)return t[o];return null}}angular.module("app.core").filter("getByName",t)}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";function t(){this.config={appErrorPrefix:void 0},this.configure=function(t){this.config.appErrorPrefix=t},this.$get=function(){return{config:this.config}}}function e(t){t.decorator("$exceptionHandler",o)}function o(t,e,o){return function(r,n){var c=e.config.appErrorPrefix||"",a={exception:r,cause:n};r.message=c+r.message,t(r,n),o.error(r.message,a)}}angular.module("blocks.exception").provider("exceptionHandler",t).config(e),e.$inject=["$provide"],o.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function t(t,e){function o(o){return function(r){var n,c;return r.data&&r.data.description&&(n="\n"+r.data.description,c=o+n),r.data.description=c,e.error(c),t.reject(r)}}var r={catcher:o};return r}t.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",t)}(),function(){"use strict";function t(t,e){function o(e,o,r){console.error(e,r),t.error("Error: "+e,o)}function r(e,o,r){console.info(e,r),t.info("Info: "+e,o)}function n(e,o,r){console.log(e,r),t.info("Success: "+e,o)}function c(e,o,r){console.warn(e,r),t.warn("Warning: "+e,o)}var a={error:o,info:r,success:n,warning:c,log:t.log};return a}angular.module("blocks.logger").factory("logger",t),t.$inject=["$log"]}(),function(){"use strict";function t(t,e,o){function r(t,r,c,a){function u(t,r){t.forEach(function(t){t.config.resolve=angular.extend(t.config.resolve||{},n.resolveAlways),e.state(t.state,t.config)}),r&&!g&&(g=!0,o.otherwise(r))}function i(){r.$on("$stateChangeError",function(e,o,r,n,c,u){if(!f){m.errors++,f=!0;var i=o&&(o.title||o.name||o.loadedTemplateUrl)||"unknown target",l="Error routing to "+i+". "+(u.data||"")+". <br/>"+(u.statusText||"")+": "+(u.status||"");a.warning(l,[o]),t.path("/")}})}function l(){i(),p()}function s(){return c.get()}function p(){r.$on("$stateChangeSuccess",function(t,e,o,c,a){m.changes++,f=!1;var u=n.docTitle+" "+(e.title||"");r.title=u})}var f=!1,g=!1,m={errors:0,changes:0},d={configureStates:u,getStates:s,stateCounts:m};return l(),d}var n={docTitle:void 0,resolveAlways:{}};t.html5Mode({enabled:!0}),this.configure=function(t){angular.extend(n,t)},this.$get=r,r.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",t),t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){angular.module("app.lab.products",["app.core"])}(),function(){"use strict";angular.module("app.lab.attributes",["app.core"])}(),function(){"use strict";angular.module("app.basket",["app.core"])}(),function(){"use strict";angular.module("app.homepage",["app.core"])}(),function(){"use strict";angular.module("app.layout",["app.core"])}(),function(){angular.module("app.lab",["app.core","app.lab.products","app.lab.attributes"])}(),function(){"use strict";function t(t,e){t.smallHeader=!0,e.$on("$destroy",function(){t.smallHeader=!1});var o=this;o.title="Panier"}angular.module("app.basket").controller("BasketController",t),t.$inject=["$rootScope","$scope"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"basket",config:{url:"/panier",templateUrl:"app/basket/basket.view.html",controller:"BasketController",controllerAs:"basket",title:"DoYourBeauty"}}]}angular.module("app.basket").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t){function e(){t.go("lab.products")}var o=this;o.goTo=e}angular.module("app.homepage").controller("HomeController",t),t.$inject=["$state"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"homepage",config:{url:"/",templateUrl:"app/homepage/homepage.view.html",controller:"HomeController",controllerAs:"homeVm",title:"DoYourBeauty"}}]}angular.module("app.homepage").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t){var e=this;e.choices={}}angular.module("app.lab").controller("LabController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"lab",config:{url:"/lab",templateUrl:"app/lab/lab.view.html",controller:"LabController",controllerAs:"labVm",title:"DoYourBeauty - Lab"}}]}angular.module("app.lab").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e,o){function r(){o.ready().then(n)}function n(){a.products=o.getProducts()}function c(e){t.labVm.choices.product=e}var a=this;a.select=c,r()}angular.module("app.lab.products").controller("ProductsController",t),t.$inject=["$scope","$state","dataservice"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"lab.products",config:{url:"/products",title:"DoYourBeauty - products",controller:"ProductsController",controllerAs:"productsVm",templateUrl:"app/lab/products/products.view.html"}}]}angular.module("app.lab.products").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e,o,r,n,c){function a(){return"undefined"==typeof t.labVm.choices.product?void e.go("lab.products"):(c.scrollTop(0,0),r.smallHeader=!0,y.product=t.labVm.choices.product,y.attributes=o("orderBy")(y.product.attributes,"order"),void(y.current=y.attributes[0]))}function u(t){return"app/lab/attributes/forms/"+t.form+"/"+t.form+".view.html"}function i(t){return"app/lab/attributes/summary/"+t.name+"/"+t.name+".view.html"}function l(e){return"undefined"!=typeof t.labVm.choices[e.name]}function s(e){d();var o=0,r=!0,n=y.attributes[0];for($("#summary");o<y.attributes.length&&r;){var a=angular.element(document.getElementById(y.attributes[o].name)),u=a.prop("offsetTop")-y.offset-5,i=a.prop("offsetTop")+a[0].offsetHeight-y.offset-5;c.scrollTop()>=u&&(c.scrollTop()<=i?(y.current=y.attributes[o],r=!1):o!=y.attributes.length-1&&(n=y.attributes[o+1])),o++}r&&(y.current=n,y.showPack?c.scrollTop()>=$("#summary2").offset().top-y.offset-5?y.current="summary2":c.scrollTop()>=$("#packaging-2").offset().top-y.offset-5?c.scrollTop()<=$("#packaging-2").offset().top+$("#packaging-2").outerHeight()-y.offset-5?y.current="packaging-2":y.current="summary2":c.scrollTop()>=$("#packaging-1").offset().top-y.offset-5?c.scrollTop()<=$("#packaging-1").offset().top+$("#packaging-1").outerHeight()-y.offset-5?y.current="packaging-1":y.current="packaging-2":c.scrollTop()>=$("#summary").offset().top-y.offset-5&&(c.scrollTop()<=$("#summary").offset().top+$("#summary").outerHeight()-y.offset-5?y.current="summary":y.current="packaging-1"):c.scrollTop()>=$("#summary").offset().top-y.offset-5&&(y.current="summary")),t.$apply()}function p(t){"string"==typeof t?g(document.querySelector("#"+t)):y.current&&t.name===y.current.name||g(document.querySelector("#"+t.name))}function f(t){var e=angular.element(t).next();g(e[0])}function g(t){c.scrollToElement(t,y.offset,1e3)}function m(){var e=Object.keys(t.labVm.choices).length;return e==y.attributes.length+1}function d(){y.showPack?c.scrollTop()>=$("#summary2").offset().top-100?$("#lab nav").css({position:"absolute",top:$("#summary2").offset().top}):$("#lab nav").removeAttr("style"):c.scrollTop()>=$("#summary").offset().top-100?$("#lab nav").css({position:"absolute",top:$("#summary").offset().top}):$("#lab nav").removeAttr("style")}function b(t){y.packValidation[t]=!0,f(document.querySelector("#"+t))}function h(){y.packTexture="wood",$("#packaging-1 .preview").css("background-image","url(/img/pack/pot-bamboo.jpg)")}function v(){y.palette="pink",y.imgEtiquette="/img/pack/Pack_perso_01-04.png",y.colorEtiquette="#D60D53"}var y=this;y.product=null,y.attributes=[],y.offset=218,y.getForm=u,y.getResultView=i,y.choiceValidate=l,y.render=p,y.goToNext=f,y.isFinish=m,y.imgEtiquette="/img/pack/Pack_perso_01-06.png",y.colorEtiquette="#000",y.palette="default",y.packValidation={"packaging-1":!1,"packaging-2":!1},y.validePack=b,y.packTexture="glass",y.changePackTexture=h,y.changeEtiquette=v;$("#lab nav").offset().top;n.addEventListener("scroll",s),a(),t.$on("$destroy",function(){r.smallHeader=!1,n.removeEventListener("scroll",s)})}angular.module("app.lab.attributes").controller("AttributesController",t),t.$inject=["$scope","$state","$filter","$rootScope","$window","$document"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"lab.attributes",config:{url:"/attributes",title:"DoYourBeauty - attributes",controller:"AttributesController",controllerAs:"attributesVm",templateUrl:"app/lab/attributes/attributes.view.html"}}]}angular.module("app.lab.attributes").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e){function o(e){n.choice=e,t.labVm.choices[n.attribute.name]=e,r(n.choice.img),t.attributesVm.goToNext(document.querySelector("#"+n.attribute.name))}function r(t){n.attribute.haveImgPreview&&(n.imgPreview=t)}var n=this;n.choice=null,n.imgPreview=null,n.setChoice=o,n.setImgPreview=r}angular.module("app.lab.attributes").controller("BtnRadioController",t),t.$inject=["$scope","$filter"]}(),function(){"use strict";function t(t){function e(t){return n.choices.indexOf(t)>-1}function o(t){var e=n.choices.indexOf(t);e>-1?n.choices.splice(e,1):n.choices.push(t)}function r(){t.labVm.choices[n.attribute.name]=n.choices,t.attributesVm.goToNext(document.querySelector("#"+n.attribute.name))}var n=this;n.choices=[],n.exists=e,n.toggle=o,n.saveChoices=r}angular.module("app.lab.attributes").controller("CheckboxController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(t){n.choice&&(document.getElementById("form-color-"+n.choice.value).style.opacity=1,n.percent=100),n.choice=t}function o(){t.labVm.choices[n.attribute.name]=n.choice,t.labVm.choices[n.attribute.name].percent=parseFloat(n.percent),t.attributesVm.goToNext(document.querySelector("#"+n.attribute.name))}function r(){document.getElementById("form-color-"+n.choice.value).style.opacity=n.percent/100}var n=this,n=this;n.choice=null,n.setChoice=e,n.setOpacity=r,n.saveChoice=o,n.percent=100}angular.module("app.lab.attributes").controller("ColorController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(e){o.choice=e,t.labVm.choices[o.attribute.name]=e,t.attributesVm.goToNext(document.querySelector("#"+o.attribute.name))}var o=this;o.choice=null,o.setChoice=e}angular.module("app.lab.attributes").controller("ImgRadioController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(){""!==o.choice&&null!==o.choice?(t.labVm.choices[o.attribute.name]=o.choice,t.attributesVm.goToNext(document.querySelector("#"+o.attribute.name))):delete t.labVm.choices[o.attribute.name]}var o=this;o.choice=null,o.setChoice=e}angular.module("app.lab.attributes").controller("InputTextController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(t){r.choice&&(r.percent=100),r.choice=t}function o(){t.labVm.choices[r.attribute.name]=r.choice,t.labVm.choices[r.attribute.name].percent=r.percent,t.attributesVm.goToNext(document.querySelector("#"+r.attribute.name))}var r=this,r=this;r.choice=null,r.setChoice=e,r.saveChoice=o,r.percent=100}angular.module("app.lab.attributes").controller("RadioSliderController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e){function o(){e.scrollTo(0,0,1e3)}function r(t){return t/100}function n(){t.attributesVm.showPack=!0,t.attributesVm.goToNext(document.querySelector("#summary"))}var c=this;c.goToTop=o,c.goToPack=n,c.transformPercent=r}angular.module("app.lab.attributes").controller("CreamController",t),t.$inject=["$scope","$document"]}();